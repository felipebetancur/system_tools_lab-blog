---
import { defaultLanguage, type LanguageCode } from '@/i18n/ui';
import type { NavItem } from '@/layouts/BaseLayout.astro';
import { type LanguageSelectorItem } from '@/lib/i18n-utils';
import { getRelativeLocaleUrl } from 'astro:i18n';
import { LanguageSelector } from './LanguageSelector.tsx';
import Logo from './Logo.astro';
import ThemeToggle from './ThemeToggle.astro';

interface Props {
  languagesForSelector: Array<LanguageSelectorItem>;
  navItems: Array<NavItem>;
}
const { languagesForSelector, navItems } = Astro.props as Props;

const currentLocale =
  (Astro.currentLocale as LanguageCode | undefined) ?? defaultLanguage;
---

<header
  class="py-6 border-b sticky top-0 z-50 w-full bg-background/95 backdrop-blur supports-backdrop-filter:bg-background/60"
>
  <nav class="mx-auto px-4 max-w-screen-2xl flex justify-between items-center">
    <Logo />
    <div class="flex items-center gap-x-5">
      {
        navItems.map((link) => (
          <a
            href={getRelativeLocaleUrl(currentLocale, link.href)}
            class="font-medium text-muted-foreground transition-colors hover:text-foreground relative group"
          >
            {link.label}
            <span class="absolute -bottom-1 left-0 w-0 h-0.5 bg-primary transition-all duration-300 group-hover:w-full" />
          </a>
        ))
      }
    </div>
    <div class="flex items-center gap-x-3">
      <LanguageSelector
        currentLocale={currentLocale}
        languages={languagesForSelector}
        client:load
      />
      <ThemeToggle />
      <a
        href="https://github.com/FelipeBetancur"
        target="_blank"
        rel="noopener noreferrer"
        aria-label="Github"
        class="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 hover:bg-accent hover:text-accent-foreground h-10 w-10"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          stroke-width="2"
          stroke-linecap="round"
          stroke-linejoin="round"
          class="h-5 w-5"
          ><path
            d="M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35.0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35.0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"
          ></path><path d="M9 18c-4.51 2-5-2-7-2"></path>
        </svg>
      </a>
    </div>
  </nav>
</header>
